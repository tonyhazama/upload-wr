(this["webpackJsonpgq-leaderboard"]=this["webpackJsonpgq-leaderboard"]||[]).push([[0],{130:function(t,e){},187:function(t,e,n){},193:function(t,e){},194:function(t,e){},378:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),c=n(30),o=n.n(c),i=(n(187),n(25)),u=n.n(i),s=n(41),l=n(78),d=n(49),p=(n(188),n(382)),f=n(48),b=n(84),h=n(177),j=n(179),v=n(383),m=n(62),w=n(384),O=n(180),x=n(125),k=n(64),g=n.n(k),y=n(170),I=n.n(y),S=n(19),D=["value","title","onChange","onRemove","accept","maxSize","url","uploadFn","disabled","fluidBtn","classBtn","splitUpload","showDesc","showPreview","previewStyle","onInputData"];function F(t,e){var n=new FileReader;n.addEventListener("load",(function(){return e(n.result)})),n.readAsBinaryString(t)}function R(t){var e,n=t.value,r=t.title,c=t.onChange,o=(t.onRemove,t.accept),i=t.maxSize,p=(t.url,t.uploadFn,t.disabled),k=t.fluidBtn,g=(t.classBtn,t.splitUpload,t.showDesc),y=(t.showPreview,t.previewStyle,t.onInputData),R=(Object(j.a)(t,D),Object(a.useState)([])),C=Object(d.a)(R,2),E=C[0],T=C[1],J=Object(a.useState)(!1),U=Object(d.a)(J,2),B=U[0],M=U[1],A=Object(a.useState)([]),P=Object(d.a)(A,2);P[0],P[1];Object(a.useEffect)((function(){n&&T(n.fileList||[])}),[n]);var W=function(){var t=Object(s.a)(u.a.mark((function t(e){var n;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:M(!0),(n=(n=(n=Object(h.a)(e.fileList)).slice(-1)).map((function(t){return t.size/1024/1024>i&&(t.name="File terlalu besar",t.response="File tidak dapat diunggah",t.status="error",c(null)),t}))).length>0&&"error"!==n[0].status&&F(n[0].originFileObj,(function(t){var e=x.read(t,{type:"binary"}),n=e.SheetNames[0],a=e.Sheets[n],r=x.utils.sheet_to_json(a,{header:1});y(r)})),T(n),M(!1);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),z={beforeUpload:function(t){return!1},onChange:function(t){W(t)},onRemove:function(t){c(""),T([])},fileList:E,multiple:!1};return Object(S.jsxs)("div",{children:[Object(S.jsx)(v.a,Object(l.a)(Object(l.a)({},z),{},{iconRender:"",accept:o,children:Object(S.jsxs)(f.a,(e={style:{marginBottom:"1em"},disabled:p||B},Object(b.a)(e,"style",{width:k?"100%":"auto",padding:"5px 20px",height:"auto"}),Object(b.a)(e,"children",[B?Object(S.jsx)(m.a,{}):Object(S.jsx)(w.a,{})," ",r,!!n&&Object(S.jsx)(O.a,{style:{color:"#27ae60"}})]),e))})),!n&&g&&Object(S.jsxs)(I.a,{style:{color:"rgb(172, 172, 172)"},children:[" Ukuran file max ",i," MB"]})]})}R.defaultProps={title:"Upload File",onChange:function(){},onError:function(){},onRemove:function(){},maxSize:1,url:"",uploadFn:function(t,e,n){return new Promise((function(n,a){var r=new FormData;r.append("file",e),g.a.post(t,r).then((function(t){n(t)})).catch((function(t){return a(t)}))}))},splitUpload:!1,showDesc:!1,showPreview:!1,previewStyle:{}};var C=R,E=n(371).getJsDateFromExcel,T=[{title:"Date",dataIndex:"date",key:"date"},{title:"Tasks",dataIndex:"tasks",key:"tasks",render:function(t,e,n){return Object(S.jsx)(B,{task:e.tasks})}},{title:"Location",dataIndex:"location",key:"location"},{title:"Task ID",dataIndex:"taskId",key:"taskId"}],J=function(t){return new Date(t).toISOString().split("T")[0]};function U(){var t=Object(a.useState)(null),e=Object(d.a)(t,2),n=e[0],r=e[1],c=Object(a.useState)([]),o=Object(d.a)(c,2),i=o[0],b=o[1],h=Object(a.useState)(""),j=Object(d.a)(h,2),v=j[0],m=j[1],w=Object(a.useState)(),O=Object(d.a)(w,2),x=O[0],k=O[1],y=Object(a.useState)(""),I=Object(d.a)(y,2),D=I[0],F=I[1];Object(a.useEffect)((function(t){F("eyJhbGciOiJIUzUxMiJ9.eyJzdWIiOiJ0b255aGF6YW1hNDcyMUBnbWFpbC5jb20iLCJhdXRob3JpdGllcyI6WyIyIl0sImlhdCI6MTY0MjA5MjY1MSwiZXhwIjoxNjQyMTc5MDUxfQ.jani8HSQkqmt_i4GtVF-EurE5t-iSDNyIA_7KI9Azbcs8qG1eiWxbzNkzjMkRlXJ14YidJmB0H08CHcwaEU36A")}),[]),Object(a.useEffect)((function(t){x&&R(x[0],x[1])}),[x]);var R=function(t,e){var a={headers:{Authentication:D}};g.a.get("https://wr.tujuhsembilan.com/wr-be/workingReport?employeeId=26&startDate=".concat(t,"&endDate=").concat(e),a).then((function(t){var e=t.data.data||[],a=n.map((function(t){var n=e.find((function(e){return J(e.date)===t.date}))||{};return Object(l.a)(Object(l.a)({},t),{},{taskId:n.workingReportId})}));b(e),r(a)}))},U=function(){var t=Object(s.a)(u.a.mark((function t(e,n,a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=Object(s.a)(u.a.mark((function t(r,c){var o,i;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o={headers:{Authentication:D}},i={workingReportId:e,date:n,startTime:"08:00:00",endTime:"17:00:00",location:a,categoryCodeId:1,holiday:!1},m((function(t){return t+"^ Updating WR ".concat(e," ...\n")})),t.prev=3,t.next=6,g.a.put("https://wr.tujuhsembilan.com/wr-be/workingReport/update?modelID=workingReportId:".concat(e),i,o);case 6:m((function(t){return t+"v WR ".concat(e," updated.\n")})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),m((function(t){return t+"! Failed to update WR ".concat(e,".\n")}));case 12:r();case 13:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),B=function(){var t=Object(s.a)(u.a.mark((function t(e,n,a,r){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=Object(s.a)(u.a.mark((function t(c,o){var i,s;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i={headers:{Authentication:D}},s={workingReportId:e,jobGroupId:372,taskItem:n,duration:a,isOvertime:!1},m((function(t){return t+"? Creating task ".concat(e,"#").concat(r," ...\n")})),t.prev=3,t.next=6,g.a.post("https://wr.tujuhsembilan.com/wr-be/task/create",s,i);case 6:t.sent,m((function(t){return t+"+ Task ".concat(e,"#").concat(r," Created.\n")})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(3),m((function(t){return t+"! Failed to create task ".concat(e,"#").concat(r,".\n")}));case 13:c();case 14:case"end":return t.stop()}}),t,null,[[3,10]])})));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})));return function(e,n,a,r){return t.apply(this,arguments)}}(),M=function(){var t=Object(s.a)(u.a.mark((function t(e,n,a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function(){var t=Object(s.a)(u.a.mark((function t(r,c){var o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o={headers:{Authentication:D}},m((function(t){return t+"/ Deleting task ".concat(e," (").concat(n,"#").concat(a,") ...\n")})),t.prev=2,t.next=5,g.a.delete("https://wr.tujuhsembilan.com/wr-be/task/delete?modelID=taskId:".concat(e),o);case 5:m((function(t){return t+"- Task ".concat(e," (").concat(n,"#").concat(a,") Deleted.\n")})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(2),m((function(t){return t+"! Failed to delete task ".concat(e," (").concat(n,"#").concat(a,").\n")}));case 11:r();case 12:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e,n){return t.apply(this,arguments)}}()));case 1:case"end":return t.stop()}}),t)})));return function(e,n,a){return t.apply(this,arguments)}}(),A=function(){var t=Object(s.a)(u.a.mark((function t(){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(confirm("Are you sure?")){t.next=2;break}return t.abrupt("return");case 2:i.forEach((function(t){var e=t.regularTasks,n=t.workingReportId;e.forEach(function(){var t=Object(s.a)(u.a.mark((function t(e,a){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,M(e.taskId,n,a);case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())})),n.forEach(function(){var t=Object(s.a)(u.a.mark((function t(e){var n,a,r,c,o;return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.tasks,a=e.taskId,r=e.location,c=e.date,o=new Date(c).getTime(),t.next=4,U(a,o,r);case 4:n.forEach(function(){var t=Object(s.a)(u.a.mark((function t(e,n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,B(a,e[0],e[1],n);case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}());case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 4:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(S.jsxs)("div",{style:{height:"100%"},children:[Object(S.jsx)("div",{style:{display:"flex",flexWrap:"wrap"},children:Object(S.jsx)(C,{onInputData:function(t){console.log({rawData:t});var e=t.filter((function(t){return t.length>1&&!!t[1]})).map((function(t){return{date:J(E(t[0])),tasks:t[1].split(/\r?\n/).filter((function(t){return!!t})).map((function(t){var e=t.split(" - ");return e[1]=parseFloat(e[1]),e})),location:t[2]}}));r(e),k([e[0].date,e[e.length-1].date])}})}),Object(S.jsx)("div",{style:{width:"100%",margin:"2em 0"},children:Object(S.jsx)(p.a,{bordered:!0,columns:T,dataSource:n,pagination:!1})}),Object(S.jsx)(f.a,{onClick:A,disabled:!i||i.length<=0,children:"Upload Data"}),Object(S.jsxs)("div",{style:{marginTop:"1em",padding:".5em 1em",borderRadius:"4px",background:"#eeeeee"},children:[Object(S.jsx)("h4",{style:{fontWeight:"bold"},children:"Logs"}),Object(S.jsx)("pre",{children:v})]})]})}var B=function(t){var e=t.task;return Object(S.jsx)(S.Fragment,{children:e.map((function(t){return Object(S.jsx)("tr",{children:Object(S.jsxs)("td",{children:[t[0]," / ",t[1]," Jam"]})})}))})},M=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,385)).then((function(e){var n=e.getCLS,a=e.getFID,r=e.getFCP,c=e.getLCP,o=e.getTTFB;n(t),a(t),r(t),c(t),o(t)}))};o.a.render(Object(S.jsx)(r.a.StrictMode,{children:Object(S.jsx)(U,{})}),document.getElementById("root")),M()}},[[378,1,2]]]);
//# sourceMappingURL=main.576515c0.chunk.js.map